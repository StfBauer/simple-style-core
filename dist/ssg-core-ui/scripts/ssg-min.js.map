{"version":3,"sources":["ssg.ui.js"],"names":["ssg","ssg_1","UI","win","window","doc","document","ssgCoreTemplates","ssgCore","templates","ssgTemplates","patternConfig","currentSingleItems","currentSingleCount","viewports","State","coreUiElement","active","hidden","show","STATE_KEY","XTRAS","FILTERS","_currentUIState","defState","filter","xtras","screen","availWidth","_updateState","state","curState","checkSumXtras","checkSumFilter","checkSumScreen","i","length","indexOf","console","log","filterSelector","parseInt","toString","exception","_validateState","localStorage","setItem","JSON","stringify","sessionState","getItem","parse","current","update","Utils","requestData","method","url","Promise","resolve","reject","xhr","XMLHttpRequest","open","onload","this","status","response","statusText","onerror","send","changeItemToSinglePage","nodes","nodeCount","curNode","classList","contains","remove","add","hideSingleItemSlider","hide","singleItemSelector","querySelector","undefined","Filter","sliderSelection","allElements","querySelectorAll","firstItemFound","curElement","dataset","curSingleItem","title","getAttribute","file","category","push","EnableSingleSlider","elements","filterValue","newState","initDisco","disco","setInterval","discoButton","viewPortInner","viewPortWidth","curViewPort","Math","floor","random","value","style","width","clearInterval","Events","changeFilter","event","preventDefault","allButtons","curButton","target","tocButton","changeView","changeViewPort","vpButton","vpActiveButton","vpData","vpTarget","widthInput","innerWidth","viewPortResizer","KeyboardEvent","keyCode","innerPattern","newWidth","showSource","pop","codeBlocks","showAnnotation","showToc","currentButton","containerToc","filterToc","currentToc","filterFolder","filterCat","parentNode","attributes","getNamedItem","btnShowToC","split","filterButtons","curFilterButton","curFilterStyle","curDataSet","tocElement","curItem","searchToc","searchBox","getElementById","searchValue","resetResult","j","searchResult","registerEvents","curElements","eventType","handler","addEventListener","Render","container","allContent","parser","DOMParser","patterns","curPattern","curPatternTitle","filename","curTemplate","baseFilter","filepath","sample","content","patternItem","parseFromString","body","innerHTML","allContentDOM","allTempLates","allPages","allOrganism","insertAdjacentHTML","Prism","highlightAll","object","folder","ssgToc","baseElement","name","folderpath","patternTitle","currentSection","tocItems","k","RenderToc","ApplyUIState","buttons","query","invQuery","substr","notSelItems","selItems","cat","curFilter","allAMItems","slice","call","allOPTItems","allItems","concat","applyFilter","viewPortQuery","viewPortActiveButton","viewPortButton","widthSelector","contentWidth","applyScreenWidth","notes","notesButton","applyExtras","slideItems","setCurrentItem","index","currentTitle","textContent","curPatternElement","slidePatterns","stopPropagation","slider","newButton","cloneNode","replaceChild","findIndex","x","substring","ShowSliderCtrl","singleSliderControl","InitEvents","viewButtons","viewPortButtons","showCode","showAnnot","allTocItems","Init","all","then","result","error","PostRender","forEach","element","catch"],"mappings":"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","sourcesContent":["/// <reference path=\"../../typings/index.d.ts\" />\n;\nvar ssg;\n(function (ssg_1) {\n    var UI;\n    (function (UI) {\n        var win = window, doc = document, ssgCoreTemplates = ssgCore.templates, ssgTemplates = ssg.templates, patternConfig = null, currentSingleItems = [], currentSingleCount = 0, currentUIState = ssg.UI.State;\n        var viewports = [\n            320,\n            768,\n            1024,\n            3500\n        ];\n        var coreUiElement = {\n            filterButton: '.ssg-core-filter .ssg-button',\n            viewButton: '.ssg-core-view .ssg-button',\n            viewPortButton: '.ssg-core-viewport .ssg-button',\n            viewPortTarget: '.ssg-patterns-inner',\n            viewPortWidth: '#ssg-in-width',\n            viewToc: '.ssg-toc',\n            viewTocInner: '.ssg-toc-inner',\n            // Buttons\n            discoButton: '.ssg-button[data-viewport=\\'disco\\']',\n            btnShowCode: '.ssg-button[data-action=\\'ssg-code\\']',\n            btnShowAnnotion: '.ssg-button[data-action=\\'ssg-annot\\']',\n            btnShowToC: '.ssg-button[data-action=\\'ssg-toc\\']',\n            tocItem: '.ssg-toc-item',\n            tocSearchBox: '.ssg-toc-searchbox',\n            tocSearchValue: 'toc-searchbox',\n            patternItem: 'div[class^=ssg-item]',\n            singleItemNavTitle: '#ssg-item-nav-label',\n            singleItemNav: 'ssg-core-nav',\n            singleNavLeft: 'ssg-left',\n            singleNavRight: 'ssg-right',\n            // States\n            state: {\n                active: 'active',\n                hidden: 'hidden',\n                show: 'show'\n            }\n        };\n        UI.State = (function () {\n            var STATE_KEY = \"ssg.UI.State\", XTRAS = ['isolate', 'code', 'annotation'], FILTERS = ['atoms', 'molecules', 'organism', 'templates', 'pages', 'single'], SCREEN = ['s', 'm', 'l', 'uwd', 'full', 'disco'];\n            var _currentUIState = null;\n            // default UI State;\n            var defState = {\n                \"filter\": \"atoms\",\n                \"xtras\": [],\n                \"screen\": window.screen.availWidth\n            };\n            // Validate current state entry\n            var _validateState = function (state) {\n                // checking if all states are valid\n                var checkSumXtras = 0, checkSumFilter = 0, checkSumScreen = 0;\n                // Check current xtra selection\n                for (var i = state.xtras.length - 1; i > 0; i--) {\n                    var curState = state.xtras[i];\n                    if (XTRAS.indexOf(curState) === -1) {\n                        checkSumXtras += 1;\n                    }\n                }\n                // Check current filter\n                if (FILTERS.indexOf(state.filter) === -1) {\n                    checkSumFilter += 1;\n                }\n                console.log(\"state filter\", state.filter, state, !state.filterSelector);\n                // check if single is current selected filter and item has filter selector\n                // if ((state.filter !== \"single\" ||\n                //     state.filter !== \"orangism\" ||\n                //     state.filter !== \"molecules\" ||\n                //     state.filter !== \"templates\" ||\n                //     state.filter !== \"pages\") &&\n                //     !state.filterSelector) {\n                //     checkSumFilter += 1;\n                //     console.log('Hello World');\n                // }\n                // remote filter selector when single is selected\n                // if (state.filter === \"atom\" ||\n                //     state.filter === \"molecules\" &&\n                //     !state.filterSelector) {\n                //     /// removing filter selector\n                //     delete state.filterSelector;\n                // }\n                // check current screen\n                try {\n                    parseInt(state.screen.toString());\n                }\n                catch (exception) {\n                    console.log(\"ERROR:\" + exception);\n                    checkSumScreen += 1;\n                }\n                if (checkSumFilter + checkSumXtras + checkSumScreen === 0) {\n                    return true;\n                }\n                return false;\n            };\n            var _updateState = function (state) {\n                var curState = state;\n                if (_validateState(state)) {\n                    localStorage.setItem(STATE_KEY, JSON.stringify(curState));\n                }\n                else {\n                    throw \"There are some errors with the state\";\n                }\n            };\n            (function () {\n                var sessionState = localStorage.getItem(STATE_KEY);\n                // If session already exists\n                if (sessionState) {\n                    _currentUIState = JSON.parse(sessionState);\n                }\n                else {\n                    localStorage.setItem(STATE_KEY, JSON.stringify(defState));\n                    _currentUIState = defState;\n                }\n            })();\n            return {\n                current: function () {\n                    return _currentUIState;\n                },\n                update: function (state) {\n                    _updateState(state);\n                }\n            };\n        })();\n        var Utils;\n        (function (Utils) {\n            Utils.requestData = function (method, url) {\n                return new Promise(function (resolve, reject) {\n                    var xhr;\n                    var loaded = function () {\n                        if (this.status >= 200 && this.status < 300) {\n                            resolve(xhr.response);\n                        }\n                        else {\n                            reject({\n                                status: this.status,\n                                statusText: xhr.statusText\n                            });\n                        }\n                    };\n                    var onError = function () {\n                        reject({\n                            status: this.status,\n                            statusText: xhr.statusText\n                        });\n                    };\n                    xhr = new XMLHttpRequest();\n                    xhr.open(method, url);\n                    xhr.onload = loaded;\n                    xhr.onerror = onError;\n                    xhr.send();\n                });\n            };\n            Utils.changeItemToSinglePage = function (nodes) {\n                var nodeCount = nodes.length;\n                while (nodeCount !== 0) {\n                    nodeCount -= 1;\n                    var curNode = nodes[nodeCount];\n                    if (curNode.classList.contains('ssg-item')) {\n                        curNode.classList.remove('ssg-item');\n                        curNode.classList.add('ssg-item-single');\n                    }\n                }\n            };\n            Utils.hideSingleItemSlider = function (hide) {\n                var singleItemSelector = doc.querySelector(\".\" + coreUiElement.singleItemNav);\n                if (singleItemSelector !== undefined && singleItemSelector !== null) {\n                    if (hide === true) {\n                        singleItemSelector.classList.add(coreUiElement.state.hidden);\n                    }\n                    else {\n                        singleItemSelector.classList.remove(coreUiElement.state.hidden);\n                    }\n                }\n            };\n        })(Utils = UI.Utils || (UI.Utils = {}));\n        ;\n        UI.Filter = {\n            sliderSelection: function (filter) {\n                var allElements = doc.querySelectorAll('div[data-cat]'), firstItemFound = false;\n                // reset currentSingleItem\n                currentSingleItems = [];\n                for (var i = 0; i < allElements.length; i++) {\n                    var curElement = allElements[i];\n                    if (curElement.dataset['cat'] === filter) {\n                        var curSingleItem = {\n                            title: curElement.getAttribute('title'),\n                            file: curElement.dataset['file'],\n                            category: filter\n                        };\n                        currentSingleItems.push(curSingleItem);\n                        if (firstItemFound === false) {\n                            currentSingleCount = 0;\n                            firstItemFound = true;\n                            if (curElement.classList.contains('hide')) {\n                                curElement.classList.remove('hide');\n                            }\n                        }\n                        else {\n                            curElement.classList.add('hide');\n                        }\n                    }\n                    else {\n                        curElement.classList.add('hide');\n                    }\n                }\n                ssg.UI.EnableSingleSlider(currentSingleItems);\n                if (currentSingleItems.length > 1) {\n                    ssg.UI.Utils.hideSingleItemSlider(false);\n                }\n                else {\n                    ssg.UI.Utils.hideSingleItemSlider(true);\n                }\n            },\n            elements: function (filterValue) {\n                switch (filterValue) {\n                    case \"atoms\":\n                    case \"molecules\":\n                        var newState = ssg.UI.State.current();\n                        newState.filter = filterValue;\n                        ssg.UI.State.update(newState);\n                        var allElements = doc.querySelectorAll('div[data-cat]');\n                        for (var i = allElements.length - 1; i >= 0; i--) {\n                            var curElement = allElements[i];\n                            if (curElement.dataset['cat'] === filterValue) {\n                                curElement.classList.remove('hide');\n                            }\n                            else {\n                                curElement.classList.add('hide');\n                            }\n                        }\n                        ssg.UI.Utils.hideSingleItemSlider(true);\n                        break;\n                    case \"organism\":\n                        ssg.UI.Filter.sliderSelection(filterValue);\n                        break;\n                    case \"templates\":\n                        ssg.UI.Filter.sliderSelection(filterValue);\n                        break;\n                    case \"pages\":\n                        ssg.UI.Filter.sliderSelection(filterValue);\n                        break;\n                    default:\n                        break;\n                }\n            }\n        };\n        UI.initDisco = function () {\n            var disco = setInterval(function () {\n                var discoButton = document.querySelector(coreUiElement.discoButton + \".\" + coreUiElement.state.active), viewPortInner = doc.querySelector(coreUiElement.viewPortTarget), viewPortWidth = doc.querySelector(coreUiElement.viewPortWidth);\n                if (discoButton !== null) {\n                    var curViewPort = Math.floor(Math.random() * (viewports.length - 0)) + 0;\n                    viewPortWidth.value = viewPortInner.style.width = viewports[curViewPort].toString();\n                }\n                else {\n                    clearInterval(disco);\n                }\n            }, 1000);\n        };\n        UI.Events = {\n            // change all filter\n            changeFilter: function (event) {\n                // prevent all default\n                event.preventDefault();\n                var allButtons = doc.querySelectorAll(coreUiElement.filterButton);\n                for (var i = allButtons.length - 1; i >= 0; i--) {\n                    if (allButtons[i].classList.contains(coreUiElement.state.active)) {\n                        allButtons[i].classList.remove(coreUiElement.state.active);\n                    }\n                }\n                var curButton = event.target, filter = curButton.dataset['filter'];\n                curButton.classList.add(coreUiElement.state.active);\n                UI.Filter.elements(filter);\n                // Check if toc button is active otherwise remove state.\n                var tocButton = doc.querySelectorAll(coreUiElement.btnShowToC);\n                // if toc button was found\n                if (tocButton.length !== 0) {\n                    // remove active state in case toc was selected\n                    if (tocButton[0].classList.contains(coreUiElement.state.active)) {\n                        tocButton[0].classList.remove('active');\n                    }\n                }\n                ;\n                console.log(\"BEFORE :::\", ssg.UI.State.current());\n                console.log(filter);\n                var curState = ssg.UI.State.current();\n                curState.filter = filter;\n                console.log(curState);\n                ssg.UI.State.update(curState);\n                console.log(\"AFTER :::\", ssg.UI.State.current());\n                return false;\n            },\n            // change view - Add isolated, code, Annotation\n            changeView: function (event) {\n                // prevent all default\n                event.preventDefault();\n                var curButton = event.target, filter = curButton.dataset['filter'];\n                curButton.classList.contains(coreUiElement.state.active) ?\n                    curButton.classList.remove(coreUiElement.state.active) : curButton.classList.add(coreUiElement.state.active);\n            },\n            // adjust view port to differnet width\n            changeViewPort: function (event) {\n                event.preventDefault();\n                var vpButton = event.target, vpActiveButton = doc.querySelector(coreUiElement.viewPortButton + '.' + coreUiElement.state.active), vpData = vpButton.dataset['viewport'], vpTarget = doc.querySelector(coreUiElement.viewPortTarget), widthInput = doc.querySelector(coreUiElement.viewPortWidth);\n                // Updating State\n                var newState = ssg.UI.State.current();\n                newState.screen = vpData;\n                ssg.UI.State.update(newState);\n                // remove current active button\n                if (vpActiveButton !== null) {\n                    vpActiveButton.classList.remove(coreUiElement.state.active);\n                }\n                if (vpActiveButton === vpButton) {\n                    vpButton.classList.remove(coreUiElement.state.active);\n                    vpData = 'full';\n                }\n                else {\n                    vpButton.classList.add(coreUiElement.state.active);\n                }\n                // recheck Active Buttons\n                vpActiveButton = doc.querySelector(coreUiElement.viewPortButton + '.' + coreUiElement.state.active);\n                if (vpActiveButton === null) {\n                    vpActiveButton = doc.querySelector('.ssg-button[data-viewport=\\'full\\']');\n                    vpActiveButton.classList.add(coreUiElement.state.active);\n                }\n                // action what to do\n                if (typeof vpTarget !== undefined) {\n                    switch (vpData) {\n                        case 'full':\n                            vpData = vpTarget.style.width = win.innerWidth.toString();\n                            break;\n                        case 'disco':\n                            ssg.UI.initDisco();\n                            break;\n                        default:\n                            vpTarget.style.width = vpData;\n                            break;\n                    }\n                }\n                if (vpData !== 'disco') {\n                    // Update width indicator\n                    vpTarget = doc.querySelector(coreUiElement.viewPortTarget);\n                    widthInput.value = vpData;\n                }\n            },\n            // Resize View Port through manual update of width\n            viewPortResizer: function (event) {\n                if (event instanceof KeyboardEvent) {\n                    var kbEvent = event;\n                    if (kbEvent.keyCode == 13) {\n                        var innerPattern = doc.querySelector(coreUiElement.viewPortTarget), newWidth = doc.querySelector(coreUiElement.viewPortWidth);\n                        innerPattern.style.width = newWidth.value;\n                    }\n                }\n                else {\n                    var innerPattern = doc.querySelector(coreUiElement.viewPortTarget), newWidth = doc.querySelector(coreUiElement.viewPortWidth);\n                    innerPattern.style.width = newWidth.value;\n                }\n            },\n            // Show and hides source code\n            showSource: function (event) {\n                event.preventDefault();\n                // Updating State\n                var newState = ssg.UI.State.current();\n                // check if code is already included in UI Extras\n                if (newState.xtras.indexOf('code')) {\n                    newState.xtras.push('code');\n                }\n                else {\n                    newState.xtras.pop('code');\n                }\n                ssg.UI.State.update(newState);\n                if (event.target.classList.contains(coreUiElement.state.active)) {\n                    // sho source code by adding class\n                    var codeBlocks = doc.querySelectorAll('.ssg-item-code');\n                    for (var i = codeBlocks.length - 1; i >= 0; i--) {\n                        codeBlocks[i].classList.add(coreUiElement.state.show);\n                    }\n                }\n                else {\n                    // hide source code by removing the class\n                    var codeBlocks = doc.querySelectorAll('.ssg-item-code');\n                    for (var i = codeBlocks.length - 1; i >= 0; i--) {\n                        codeBlocks[i].classList.remove(coreUiElement.state.show);\n                    }\n                }\n            },\n            // show and hides annotations\n            showAnnotation: function (event) {\n                event.preventDefault();\n                // Updating State\n                var newState = ssg.UI.State.current();\n                // check if code is already included in UI Extras\n                if (newState.xtras.indexOf('annotation')) {\n                    newState.xtras.push('annotation');\n                }\n                else {\n                    newState.xtras.pop('annotation');\n                }\n                ssg.UI.State.update(newState);\n                if (event.target.classList.contains(coreUiElement.state.active)) {\n                    // sho source code by adding class\n                    var codeBlocks = doc.querySelectorAll('.ssg-item-description');\n                    for (var i = codeBlocks.length - 1; i >= 0; i--) {\n                        codeBlocks[i].classList.add(coreUiElement.state.show);\n                    }\n                }\n                else {\n                    // hide source code by removing the class\n                    var codeBlocks = doc.querySelectorAll('.ssg-item-description');\n                    for (var i = codeBlocks.length - 1; i >= 0; i--) {\n                        codeBlocks[i].classList.remove(coreUiElement.state.show);\n                    }\n                }\n            },\n            // show and collapse table of contents\n            showToc: function (event) {\n                event.preventDefault();\n                var currentButton = event.target, containerToc = doc.querySelector(coreUiElement.viewToc);\n                currentButton !== null && currentButton.classList.contains(coreUiElement.state.active) ?\n                    currentButton.classList.remove(coreUiElement.state.active) : currentButton.classList.add(coreUiElement.state.active);\n                if (containerToc !== null) {\n                    if (containerToc.classList.contains(coreUiElement.state.show)) {\n                        containerToc.classList.add(coreUiElement.state.hidden);\n                        containerToc.classList.remove(coreUiElement.state.show);\n                    }\n                    else {\n                        containerToc.classList.remove(coreUiElement.state.hidden);\n                        containerToc.classList.add(coreUiElement.state.show);\n                    }\n                }\n            },\n            // filter single toc element\n            filterToc: function (event) {\n                event.preventDefault();\n                var currentToc = event.target, filter = currentToc.dataset['filter'], filterFolder = currentToc.dataset['folder'], filterCat = (currentToc.parentNode.attributes.getNamedItem('id').value), tocButton = doc.querySelector(ssg.UI.btnShowToC);\n                if (tocButton) {\n                    tocButton[0].classList.add('active');\n                }\n                if (filterCat) {\n                    if (filterFolder === 'templates' ||\n                        filterFolder === 'organism' ||\n                        filterFolder === 'page') {\n                        var selectedItems = doc.querySelectorAll('div[data-cat=' + filterFolder + ']');\n                        // Updating current state\n                        var curState = ssg.UI.State.current();\n                        curState.filterSelector = '.' + filter;\n                        ssg.UI.State.update(curState);\n                        ssg.UI.Filter.sliderSelection(filterFolder);\n                    }\n                    else {\n                        ssg.UI.Utils.hideSingleItemSlider(true);\n                    }\n                    var category = filterCat.split('-')[1];\n                    var filterButtons = document.querySelectorAll('.ssg-core-filter .ssg-button');\n                    for (var i = filterButtons.length - 1; i >= 0; i--) {\n                        var curFilterButton = filterButtons[i], curFilterStyle = curFilterButton.classList, curDataSet = curFilterButton.dataset['filter'];\n                        if (curFilterStyle.contains('active')) {\n                            curFilterStyle.remove('active');\n                        }\n                        if (curDataSet === category) {\n                            curFilterStyle.add('active');\n                        }\n                    }\n                }\n                // Updating State\n                var newState = ssg.UI.State.current();\n                newState.filter = 'single';\n                newState.filterSelector = '.' + filter;\n                ssg.UI.State.update(newState);\n                if (filter !== null) {\n                    var allElements = doc.querySelectorAll(coreUiElement.patternItem), tocElement = doc.querySelector(coreUiElement.viewToc);\n                    for (var i = allElements.length - 1; i >= 0; i--) {\n                        var curItem = allElements[i];\n                        if (curItem.dataset['file'] === filter) {\n                            curItem.classList.remove('hide');\n                        }\n                        else {\n                            curItem.classList.add('hide');\n                        }\n                    }\n                    tocElement.classList.remove('show');\n                    tocElement.classList.add('hidden');\n                }\n            },\n            // search for item in toc\n            searchToc: function (event) {\n                event.preventDefault();\n                var searchBox = doc.getElementById(coreUiElement.tocSearchValue);\n                if (searchBox !== null) {\n                    var searchValue = searchBox.value;\n                    var resetResult = doc.querySelectorAll('.ssg-toc-item');\n                    for (var j = resetResult.length - 1; j >= 0; j--) {\n                        if (resetResult[j].classList.contains('hide')) {\n                            resetResult[j].classList.remove('hide');\n                        }\n                    }\n                    if (searchValue !== '') {\n                        var searchResult = doc.querySelectorAll(\".ssg-toc-item:not([data-filter*='\" + searchValue + \"'])\");\n                        if (searchResult !== null) {\n                            for (var i = searchResult.length - 1; i >= 0; i--) {\n                                searchResult[i].classList.add('hide');\n                            }\n                        }\n                    }\n                }\n            },\n            // register specific event on all notes\n            registerEvents: function (curElements, eventType, handler) {\n                for (var i = curElements.length - 1; i >= 0; i--) {\n                    curElements[i].addEventListener(eventType, handler);\n                }\n            }\n        };\n        UI.Render = function () {\n            var RenderToc = function (patternConfig) {\n                var patterns = patternConfig.patterns.filter(function (object) {\n                    return object[\"deleted\"] === undefined;\n                }), folder = patternConfig.folder, ssgToc = doc.querySelector(coreUiElement.viewTocInner);\n                for (var i = 0; i < folder.length; i++) {\n                    var baseElement = '<ul><li id=ssg-' + folder[i].name + ' class=ssg-toc-header>' +\n                        folder[i].name +\n                        '</li><ul id=ssg-' + folder[i].name + '-items class=ssg-toc-items></ul></ul>';\n                    ssgToc.insertAdjacentHTML('beforeend', baseElement);\n                }\n                for (var j = 0; j < patterns.length; j++) {\n                    var folderpath = patterns[j].filepath.split('/')[0];\n                    var patternTitle = '<li class=ssg-toc-item data-filter=\\\"' +\n                        patterns[j].filename + '\\\" ' +\n                        ' data-folder=\\\"' + folderpath + '\\\" ' +\n                        '>' +\n                        patterns[j].title + '</li>';\n                    var currentSection = doc.getElementById('ssg-' + folderpath + '-items');\n                    if (currentSection !== null) {\n                        currentSection.insertAdjacentHTML('beforeend', patternTitle);\n                    }\n                }\n                var tocItems = doc.querySelectorAll(coreUiElement.tocItem);\n                for (var k = 0; k < tocItems.length; k++) {\n                    tocItems[k].addEventListener('click', UI.Events.filterToc);\n                }\n            };\n            var container = doc.querySelector(coreUiElement.viewPortTarget), tocContainer = doc.querySelector(coreUiElement.viewTocInner);\n            var allContent = '', allToc = '', parser = new DOMParser();\n            for (var i = patternConfig.patterns.length - 1; i >= 0; i--) {\n                var curPattern = patternConfig.patterns[i], curPatternTitle = curPattern.filename, curTemplate = ssgTemplates[curPatternTitle];\n                // Define base filter\n                curPattern.baseFilter = curPattern.filepath.split('/')[0];\n                if (curPattern !== null) {\n                    curPattern.sample = curTemplate;\n                    var content = ssgCoreTemplates.patternItem(curPattern);\n                    try {\n                        // Parse Document and check if all elements are properly closed\n                        var domContent = parser.parseFromString(content, 'text/html');\n                        // Append parsed content\n                        allContent = domContent.body.innerHTML + allContent;\n                    }\n                    catch (exception) {\n                        console.log(exception);\n                    }\n                }\n            }\n            var allContentDOM = parser.parseFromString(allContent, 'text/html');\n            // alter templates and pages\n            var allTempLates = allContentDOM.querySelectorAll('div[data-cat=templates]'), allPages = allContentDOM.querySelectorAll('div[data-cat=pages]'), allOrganism = allContentDOM.querySelectorAll('div[data-cat=organism]');\n            Utils.changeItemToSinglePage(allTempLates);\n            Utils.changeItemToSinglePage(allPages);\n            Utils.changeItemToSinglePage(allOrganism);\n            container.insertAdjacentHTML('afterbegin', allContentDOM.body.innerHTML);\n            Prism.highlightAll();\n            RenderToc(patternConfig);\n            // console.log(\"BEFORE :::\", ssg.UI.State.current());\n            UI.ApplyUIState(ssg.UI.State.current());\n            // console.log(\"AFTER :::\", ssg.UI.State.current());\n        };\n        UI.ApplyUIState = function (state) {\n            var applyFilter = function (state) {\n                if (state.filter !== undefined\n                    && state.filter !== 'single') {\n                    var buttons = doc.querySelectorAll(\".ssg-button[data-filter]\");\n                    // Set correct button\n                    for (var i = buttons.length - 1; i >= 0; i--) {\n                        var curButton = buttons[i];\n                        if (curButton.dataset !== null\n                            && curButton.dataset !== undefined\n                            && curButton.dataset['filter'] === state.filter) {\n                            if (!curButton.classList.contains('active')) {\n                                curButton.classList.add('active');\n                            }\n                        }\n                        else {\n                            if (curButton.classList.contains('active')) {\n                                curButton.classList.remove('active');\n                            }\n                        }\n                    }\n                    var query = \".ssg-item[data-cat='\" + state.filter + \"']\", invQuery = \".ssg-item:not([data-cat='\" + state.filter + \"'])\";\n                    if (state.filter === 'single') {\n                        var filter = state.filterSelector.substr(1);\n                        query = \"div[data-file='\" + filter + \"']\";\n                        invQuery = \"div:not([data-file='\" + filter + \"'])\";\n                        var tocButton = doc.querySelectorAll(\".ssg-button[data-action='ssg-toc']\");\n                        if (tocButton !== undefined && tocButton.length === 1) {\n                            tocButton[0].classList.add('active');\n                        }\n                    }\n                    if (state.filter === 'organism' ||\n                        state.filter === 'molecules' ||\n                        state.filter === 'templates') {\n                        ssg.UI.Filter.sliderSelection(state.filter);\n                    }\n                    // unselect all\n                    var notSelItems = doc.querySelectorAll(invQuery);\n                    for (var i = notSelItems.length - 1; i >= 0; i--) {\n                        notSelItems[i].classList.add('hide');\n                    }\n                    // make sure all are selected\n                    var selItems = doc.querySelectorAll(query);\n                    if (selItems.length === 1) {\n                        var curItem = selItems[0];\n                        if (curItem.dataset.cat !== undefined\n                            && curItem.dataset.cat !== null\n                            && (curItem.dataset.cat === 'templates'\n                                || curItem.dataset.cat === 'pages'\n                                || curItem.dataset.cat === 'organism')) {\n                            ssg.UI.Filter.sliderSelection(curItem.dataset.cat);\n                        }\n                        else {\n                            ssg.UI.Utils.hideSingleItemSlider(true);\n                        }\n                    }\n                    else {\n                        for (var i = selItems.length - 1; i >= 0; i--) {\n                            selItems[i].classList.remove('hide');\n                        }\n                    }\n                }\n                else if (state.filter === 'single') {\n                    var tocButton = doc.querySelector(coreUiElement.btnShowToC);\n                    tocButton.classList.add('active');\n                    if (state.filterSelector !== undefined &&\n                        state.filterSelector !== null) {\n                        var curFilter = state.filterSelector.substr(1);\n                        var allAMItems = [].slice.call(doc.querySelectorAll('div[class=ssg-item')), allOPTItems = [].slice.call(doc.querySelectorAll('div[class=ssg-item-single')), allItems = allAMItems.concat(allOPTItems);\n                        for (var i = allItems.length - 1; i >= 0; i--) {\n                            if (allItems[i].dataset['file'] !== curFilter) {\n                                var curItem = allItems[i];\n                                curItem.classList.add('hide');\n                            }\n                        }\n                    }\n                }\n            };\n            // apply the correct selected scren width tot the viewport\n            var applyScreenWidth = function (state) {\n                var viewPortQuery = \"button[data-viewport='\" + state.screen + \"']\", viewPortInvQuery = \"button.active[data-viewport]\", \n                // selecting buttons\n                viewPortActiveButton = doc.querySelector(viewPortInvQuery), viewPortButton = doc.querySelector(viewPortQuery), \n                // width selector\n                widthSelector = doc.getElementById('ssg-in-width'), contentWidth = doc.querySelector('.ssg-patterns-inner');\n                // If full screeen use actian width\n                if (state.screen === 'full') {\n                    state.screen = window.innerWidth;\n                }\n                // set inner screen width of patterns\n                contentWidth.style.width = state.screen + \"px\";\n                // view width selector\n                widthSelector.value = state.screen;\n                // activate viewport button\n                if (viewPortButton !== undefined\n                    && viewPortButton !== null) {\n                    viewPortButton.classList.add('active');\n                    if (viewPortButton !== viewPortActiveButton) {\n                        viewPortActiveButton.classList.remove('active');\n                    }\n                }\n            };\n            // applies extras such as shwo Source code\n            var applyExtras = function (state) {\n                if (state.xtras.indexOf('annotation')) {\n                    var notes = doc.querySelectorAll('.ssg-item-description');\n                    for (var i = notes.length - 1; i >= 0; i--) {\n                        var curNote = notes[i];\n                        curNote.classList.add('show');\n                    }\n                    var notesButton = doc.querySelectorAll(\"button[data-action='ssg-annot']\");\n                    for (var i = notesButton.length - 1; i >= 0; i--) {\n                        notesButton[i].classList.add('active');\n                    }\n                }\n            };\n            console.log(\"STATE:::\", state);\n            applyFilter(state);\n            applyScreenWidth(state);\n            applyExtras(state);\n        };\n        UI.EnableSingleSlider = function (currentSingleItems, filter) {\n            var slideItems = currentSingleItems;\n            var setCurrentItem = function (index) {\n                var curElement = slideItems[index];\n                currentTitle.textContent = curElement.title;\n                var allElements = doc.querySelectorAll('div[data-cat=\\'' + slideItems[currentSingleCount].category + '\\']');\n                for (var j = 0; j < allElements.length; j++) {\n                    var curPatternElement = allElements[j];\n                    if (curPatternElement.dataset['file'] === curElement.file) {\n                        curPatternElement.classList.remove('hide');\n                        var newState = ssg.UI.State.current();\n                        // newState.filter = \"single\";\n                        newState.filterSelector = '.' + curPatternElement.dataset['file'];\n                        ssg.UI.State.update(newState);\n                    }\n                    else {\n                        curPatternElement.classList.add('hide');\n                    }\n                }\n            };\n            var slidePatterns = function (event) {\n                event.preventDefault();\n                event.stopPropagation();\n                var currentButton = event.target;\n                if (currentButton !== null) {\n                    if (currentButton.dataset['filter'] === coreUiElement.singleNavLeft) {\n                        currentSingleCount -= 1;\n                    }\n                    ;\n                    if (currentButton.dataset['filter'] === coreUiElement.singleNavRight) {\n                        currentSingleCount += 1;\n                    }\n                    ;\n                    if (currentSingleCount > currentSingleItems.length - 1) {\n                        currentSingleCount = 0;\n                    }\n                    if (currentSingleCount < 0) {\n                        currentSingleCount = currentSingleItems.length - 1;\n                    }\n                }\n                //  else {\n                //     // check from current state\n                //     for (let i = 0; currentSingleItems.length; i++) {\n                //         console.log(currentSingleItems[0]);\n                //     }\n                // }\n                setCurrentItem(currentSingleCount);\n            };\n            // check if only one pattern is in current selection\n            if (slideItems.length <= 1) {\n                return;\n            }\n            var currentTitle = doc.querySelector(coreUiElement.singleItemNavTitle);\n            currentTitle.textContent = slideItems[0].title;\n            // let slider = doc.querySelectorAll('.ssg-core-nav .ssg-button[data-filter=\\'' + filter + '\\']');\n            var slider = doc.querySelectorAll('.ssg-core-nav .ssg-button');\n            for (var i = 0; i < slider.length; i++) {\n                // remova all previous registered event handler\n                var currentButton = slider[i];\n                // clone current node without event handler\n                var newButton = currentButton.cloneNode(true);\n                // register new Click event\n                newButton.addEventListener('click', slidePatterns);\n                // replace element\n                currentButton.parentNode.replaceChild(newButton, currentButton);\n            }\n            var curState = ssg.UI.State.current();\n            // Check if TOC have been selected\n            if (curState.filterSelector !== undefined) {\n                // Setting current Item count i case filter using TOC\n                currentSingleCount = currentSingleItems.findIndex(function (x) { return x.file === curState.filterSelector.substring(1); });\n                // Update from current filter\n                setCurrentItem(currentSingleCount);\n            }\n            // if (filter === null || filter === undefined) {\n            //     console.log(\"Rolling slidePatterns\");\n            //     slidePatterns(null);\n            // }\n        };\n        UI.ShowSliderCtrl = function (show) {\n            var singleSliderControl = document.querySelector('.' + coreUiElement.singleItemNav);\n            if (show) {\n                singleSliderControl.classList.remove('hidden');\n            }\n            else {\n                singleSliderControl.classList.add('hidden');\n            }\n        };\n        UI.InitEvents = function () {\n            // Render Events\n            var filterButtons = doc.querySelectorAll(coreUiElement.filterButton), viewButtons = doc.querySelectorAll(coreUiElement.viewButton), viewPortButtons = doc.querySelectorAll(coreUiElement.viewPortButton), viewPortWidth = doc.querySelectorAll(coreUiElement.viewPortWidth), \n            // Action Buttons\n            showCode = doc.querySelectorAll(coreUiElement.btnShowCode), showAnnot = doc.querySelectorAll(coreUiElement.btnShowAnnotion), showToc = doc.querySelectorAll(coreUiElement.btnShowToC), \n            // TOC Eevent\n            allTocItems = doc.querySelectorAll(coreUiElement.tocSearchBox);\n            UI.Events.registerEvents(filterButtons, 'click', UI.Events.changeFilter);\n            UI.Events.registerEvents(viewButtons, 'click', UI.Events.changeView); // mabye obsolete?\n            UI.Events.registerEvents(viewPortButtons, 'click', UI.Events.changeViewPort);\n            UI.Events.registerEvents(viewPortWidth, 'blur', UI.Events.viewPortResizer);\n            UI.Events.registerEvents(viewPortWidth, 'focusout', UI.Events.viewPortResizer);\n            UI.Events.registerEvents(viewPortWidth, 'keypress', UI.Events.viewPortResizer);\n            UI.Events.registerEvents(showCode, 'click', UI.Events.showSource);\n            UI.Events.registerEvents(showAnnot, 'click', UI.Events.showAnnotation);\n            // show and hide table fo contents\n            UI.Events.registerEvents(showToc, 'click', UI.Events.showToc);\n            // Search table of contents\n            UI.Events.registerEvents(allTocItems, 'keyup', UI.Events.searchToc);\n        };\n        UI.Init = function () {\n            Promise.all([ssg.UI.Utils.requestData('GET', '/_config/pattern.conf.json')])\n                .then(function (result) {\n                try {\n                    patternConfig = JSON.parse(result.toString());\n                }\n                catch (error) {\n                    console.log(error);\n                }\n            })\n                .then(function () {\n                UI.Render();\n                UI.InitEvents();\n                console.log('applying UI filter');\n                console.log(ssg.UI.State.current());\n                UI.ApplyUIState(ssg.UI.State.current());\n                console.log('applying UI filter');\n                if (UI.PostRender.length !== 0) {\n                    UI.PostRender.forEach(function (element) {\n                        element();\n                    });\n                }\n            })\n                .catch(function (error) {\n                console.log(error);\n            });\n        };\n        UI.PostRender = [];\n    })(UI = ssg_1.UI || (ssg_1.UI = {}));\n})(ssg || (ssg = {}));\n;\nssg.UI.Init();\n"],"file":"ssg-min.js"}